-- Server-side script: This will be the script that executes the cheat effects
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

-- Function to create a meteor projectile
local function createMeteor(position, targetPosition)
    local meteor = Instance.new("Part")
    meteor.Shape = Enum.PartType.Ball
    meteor.Size = Vector3.new(5, 5, 5)
    meteor.Position = position
    meteor.Anchored = false
    meteor.CanCollide = true
    meteor.Parent = workspace
    meteor.Color = Color3.fromRGB(255, 0, 0)  -- Red color

    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(50000, 50000, 50000)
    bodyVelocity.Velocity = (targetPosition - position).unit * 50  -- Direct the meteor towards the target
    bodyVelocity.Parent = meteor

    -- Damage or destroy parts upon impact
    meteor.Touched:Connect(function(hit)
        if hit:IsA("BasePart") then
            -- Create explosion on impact
            local explosion = Instance.new("Explosion")
            explosion.Position = meteor.Position
            explosion.BlastRadius = 10
            explosion.BlastPressure = 10000
            explosion.Parent = workspace

            -- Deal damage to players
            if hit.Parent and hit.Parent:FindFirstChild("Humanoid") then
                local humanoid = hit.Parent:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid:TakeDamage(50)  -- Adjust damage as needed
                end
            end

            -- Destroy meteor after impact
            meteor:Destroy()
        end
    end)
end

-- Flight Mode (makes you fly by enabling BodyVelocity)
local function startFlying(character)
    local hrp = character:WaitForChild("HumanoidRootPart")
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
    bodyVelocity.Velocity = Vector3.zero
    bodyVelocity.Parent = hrp
end

-- Speed Hack (change WalkSpeed for all players)
local function applySpeedHack(character, speedMultiplier)
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.WalkSpeed = humanoid.WalkSpeed * speedMultiplier
end

-- Function to handle meteor throwing
local function onPlayerThrowMeteor(player)
    local character = player.Character
    if not character then return end
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    -- The target is where the player is pointing (camera direction)
    local camera = workspace.CurrentCamera
    local direction = camera.CFrame.LookVector
    local targetPosition = hrp.Position + direction * 100  -- You can adjust the distance

    -- Create and throw the meteor
    createMeteor(hrp.Position, targetPosition)
end

-- UI Setup (create a button to trigger meteor)
local function createUI(player)
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player:WaitForChild("PlayerGui")

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 200, 0, 50)
    button.Position = UDim2.new(0.5, -100, 0.9, 0)
    button.Text = "Throw Meteor"
    button.Parent = screenGui

    -- Bind meteor throw action to button click
    button.MouseButton1Click:Connect(function()
        onPlayerThrowMeteor(player)
    end)
end

-- When a new player joins the game, give them the ability to trigger cheats
Players.PlayerAdded:Connect(function(player)
    -- Create UI for the player to interact with
    createUI(player)

    -- Give the player the ability to fly
    startFlying(player.Character)

    -- Apply speed hack to all players
    applySpeedHack(player.Character, 2)  -- Double speed, adjust multiplier as needed

    -- You can add other cheat effects here (like summoning meteors)
end)
