local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local targetPlayer = nil

-- UI Setup (creating buttons to trigger cheats)
local function createUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player:WaitForChild("PlayerGui")

    -- Create a button for selecting a target player
    local targetPlayerDropdown = Instance.new("TextButton")
    targetPlayerDropdown.Size = UDim2.new(0, 200, 0, 50)
    targetPlayerDropdown.Position = UDim2.new(0, 10, 0, 50)  -- Positioning on the left side (fixed)
    targetPlayerDropdown.Text = "Select Target Player"
    targetPlayerDropdown.Parent = screenGui

    -- List of players as buttons
    local playerButtons = {}

    -- Function to create a list of buttons for each player
    local function updatePlayerList()
        local yPosition = 110  -- Start positioning the buttons below the first button

        -- Remove any old player buttons first (to reset the list)
        for _, button in pairs(playerButtons) do
            button:Destroy()
        end

        -- Create buttons for each player
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player then
                -- Create a button for each player
                local playerButton = Instance.new("TextButton")
                playerButton.Size = UDim2.new(0, 200, 0, 30)
                playerButton.Position = UDim2.new(0, 10, 0, yPosition)  -- Positioning on the left side
                playerButton.Text = p.Name
                playerButton.Parent = screenGui

                -- When the button is clicked, set the target player
                playerButton.MouseButton1Click:Connect(function()
                    targetPlayer = p
                    print("Selected target player: " .. p.Name)  -- Debugging output
                end)

                -- Add button to the list of buttons for removal later
                table.insert(playerButtons, playerButton)

                -- Increment the Y position for the next player button
                yPosition = yPosition + 40
            end
        end
    end

    -- Update the player list
    updatePlayerList()

    -- Button to make the selected player explode (and kill them)
    local explodeButton = Instance.new("TextButton")
    explodeButton.Size = UDim2.new(0, 200, 0, 50)
    explodeButton.Position = UDim2.new(0, 10, 0, 350)  -- Positioning on the left side (fixed)
    explodeButton.Text = "Explode Selected Player"
    explodeButton.Parent = screenGui

    -- When clicked, it will cause the selected player to explode (and get killed)
    explodeButton.MouseButton1Click:Connect(function()
        if targetPlayer then
            print("Exploding player: " .. targetPlayer.Name)  -- Debugging output
            makePlayerExplode(targetPlayer)
        else
            print("Please select a player first.")  -- Debugging output
        end
    end)
end

-- Function to make another player explode (only affects your client)
local function makePlayerExplode(targetPlayer)
    local character = targetPlayer.Character
    if character then
        -- Create explosion at their position
        local explosion = Instance.new("Explosion")
        explosion.Position = character.HumanoidRootPart.Position
        explosion.BlastRadius = 10
        explosion.BlastPressure = 10000
        explosion.Parent = workspace

        -- Ensure the player's health is set to 0 to simulate an instant kill
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.Health = 0  -- This will "explode" the player
        end
    end
end

createUI()
